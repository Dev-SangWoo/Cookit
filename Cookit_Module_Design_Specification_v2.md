# 🏗️ Cookit 시스템 - 모듈 설계명세서

## 📋 개요
Cookit 시스템은 총 12개의 모듈로 구성되어 있으며, 각 기능별로 프론트엔드와 백엔드 모듈이 1:1로 대응됩니다.

---

## 📱 프론트엔드 모듈 (6개)

### 1. 사용자 관리 프론트엔드 모듈

#### 3.1 모듈 이름
**UserManagementFrontendModule**

#### 3.2 모듈 형
**UI 모듈**

#### 3.3 인터페이스
**입력:**
- 사용자 인증 정보 (이메일, 비밀번호)
- 프로필 데이터 (닉네임, 자기소개, 프로필 이미지)
- 초기 설정 데이터 (요리 실력, 선호도, 알레르기 정보)

**출력:**
- 인증 결과 (성공/실패, 사용자 정보)
- 프로필 업데이트 결과
- 초기 설정 완료 상태

**처리:**
- Google OAuth를 통한 인증 검증
- 사용자 프로필 정보 관리
- 초기 설정 과정 안내 및 데이터 수집

#### 3.4 오류 메시지
**예외 처리:**
- 인증 실패 시 로그인 화면으로 리다이렉트
- 네트워크 오류 시 재시도 옵션 제공
- 중복 닉네임 시 대안 제시
- 초기 설정 미완료 시 Setup 화면으로 이동
- 권한 부족 시 적절한 안내 메시지 표시

#### 3.5 사용하는 파일
**구성 요소:**
- 인증 화면 컴포넌트
- Google 로그인 버튼 컴포넌트
- 인증 상태 관리 컨텍스트
- 프로필 관리 화면
- 초기 설정 화면들 (닉네임, 프로필, 선호도, 재료)

#### 3.6 호출하는 모듈
**의존성 관계:**
- 사용자 관리 백엔드 모듈 (인증 및 프로필 관리 API)
- 데이터베이스 모듈 (사용자 정보 저장/조회)
- Google OAuth 서비스 (외부 인증)

---

### 2. 레시피 관리 프론트엔드 모듈

#### 3.1 모듈 이름
**RecipeManagementFrontendModule**

#### 3.2 모듈 형
**UI 모듈**

#### 3.3 인터페이스
**입력:**
- 레시피 검색 조건 (제목, 카테고리, 난이도)
- 사용자 액션 (저장, 즐겨찾기, 평점)
- 요리 과정 진행 상태

**출력:**
- 레시피 목록 및 상세 정보
- 요리 과정 안내
- 사용자 피드백 (성공/실패 메시지)

**처리:**
- 레시피 데이터 시각화 및 표시
- 단계별 요리 과정 안내
- YouTube 영상 연동 및 재생 제어

#### 3.4 오류 메시지
**예외 처리:**
- 레시피 로딩 실패 시 기본 데이터 표시
- 네트워크 오류 시 오프라인 모드 전환
- 영상 재생 실패 시 대체 콘텐츠 제공
- 저장 실패 시 재시도 옵션 제공

#### 3.5 사용하는 파일
**구성 요소:**
- 홈 화면 (추천 레시피 표시)
- 레시피 목록 화면
- 레시피 상세 화면 (요리 과정)
- 요약 화면
- 레시피 카드 컴포넌트

#### 3.6 호출하는 모듈
**의존성 관계:**
- 레시피 관리 백엔드 모듈 (레시피 데이터 API)
- 데이터베이스 모듈 (사용자별 레시피 관리)
- AI 영상 분석 모듈 (AI 생성 레시피)

---

### 3. 냉장고 관리 프론트엔드 모듈

#### 3.1 모듈 이름
**RefrigeratorManagementFrontendModule**

#### 3.2 모듈 형
**UI 모듈**

#### 3.3 인터페이스
**입력:**
- 재료 정보 (이름, 수량, 유통기한)
- 영수증 이미지 (OCR 처리용)
- 재료 관리 액션 (추가, 수정, 삭제)

**출력:**
- 재료 목록 및 상태 정보
- 유통기한 알림
- OCR 처리 결과

**처리:**
- 재료 정보 시각화 및 관리
- 영수증 이미지 전처리
- 유통기한 기반 알림 시스템

#### 3.4 오류 메시지
**예외 처리:**
- OCR 처리 실패 시 수동 입력 옵션 제공
- 이미지 형식 오류 시 지원 형식 안내
- 재료 정보 저장 실패 시 재시도 옵션
- 유통기한 파싱 실패 시 수동 입력

#### 3.5 사용하는 파일
**구성 요소:**
- 재료 관리 화면
- 초기 설정 재료 화면
- OCR 처리 모듈
- 재료 추가/수정 모달

#### 3.6 호출하는 모듈
**의존성 관계:**
- 냉장고 관리 백엔드 모듈 (재료 데이터 API)
- AI 영상 분석 모듈 (OCR 처리)
- 데이터베이스 모듈 (재료 정보 저장)

---

### 4. 커뮤니티 관리 프론트엔드 모듈

#### 3.1 모듈 이름
**CommunityManagementFrontendModule**

#### 3.2 모듈 형
**UI 모듈**

#### 3.3 인터페이스
**입력:**
- 게시글 데이터 (제목, 내용, 이미지)
- 댓글 및 좋아요 액션
- 실시간 업데이트 구독

**출력:**
- 게시글 목록 및 상세 정보
- 실시간 피드 업데이트
- 상호작용 결과 (좋아요, 댓글)

**처리:**
- 게시글 작성 및 편집 인터페이스
- 실시간 피드 표시
- 이미지 업로드 및 미리보기

#### 3.4 오류 메시지
**예외 처리:**
- 게시글 작성 실패 시 임시 저장
- 이미지 업로드 실패 시 재시도 옵션
- 실시간 연결 끊김 시 수동 새로고침
- 권한 부족 시 적절한 안내 메시지

#### 3.5 사용하는 파일
**구성 요소:**
- 커뮤니티 메인 화면
- 게시글 작성 화면
- 게시글 상세 화면
- 댓글 및 좋아요 컴포넌트

#### 3.6 호출하는 모듈
**의존성 관계:**
- 커뮤니티 관리 백엔드 모듈 (게시글 API)
- 데이터베이스 모듈 (실시간 구독)
- 파일 저장소 모듈 (이미지 업로드)

---

### 5. AI 영상 분석 프론트엔드 모듈

#### 3.1 모듈 이름
**AIVideoAnalysisFrontendModule**

#### 3.2 모듈 형
**UI 모듈**

#### 3.3 인터페이스
**입력:**
- YouTube URL
- 분석 옵션 설정
- 사용자 피드백

**출력:**
- 분석 진행 상태
- 생성된 레시피 미리보기
- 분석 결과 편집 인터페이스

**처리:**
- YouTube URL 유효성 검증
- 분석 진행 상황 표시
- 결과 미리보기 및 편집 기능

#### 3.4 오류 메시지
**예외 처리:**
- 잘못된 URL 형식 시 올바른 형식 안내
- 분석 실패 시 재시도 옵션 제공
- 처리 시간 초과 시 백그라운드 처리 안내
- AI 서비스 오류 시 대안 제시

#### 3.5 사용하는 파일
**구성 요소:**
- AI 분석 화면
- YouTube URL 입력 컴포넌트
- 분석 진행 상태 표시
- 결과 미리보기 컴포넌트

#### 3.6 호출하는 모듈
**의존성 관계:**
- AI 영상 분석 백엔드 모듈 (AI 파이프라인 API)
- 레시피 관리 모듈 (생성된 레시피 저장)

---

### 6. 검색, 추천 프론트엔드 모듈

#### 3.1 모듈 이름
**SearchRecommendationFrontendModule**

#### 3.2 모듈 형
**UI 모듈**

#### 3.3 인터페이스
**입력:**
- 검색어 및 필터 조건
- 사용자 선호도 데이터
- 검색 히스토리

**출력:**
- 검색 결과 목록
- 개인화 추천 레시피
- 필터링된 결과

**처리:**
- 검색어 자동완성 및 제안
- 필터 조건 시각화
- 검색 결과 정렬 및 페이지네이션

#### 3.4 오류 메시지
**예외 처리:**
- 검색 결과 없음 시 대안 제시
- 네트워크 오류 시 캐시된 결과 표시
- 필터 조건 오류 시 기본값으로 복원
- 추천 실패 시 인기 레시피 표시

#### 3.5 사용하는 파일
**구성 요소:**
- 검색 메인 화면
- 검색 결과 화면
- 필터링 컴포넌트
- 추천 레시피 컴포넌트

#### 3.6 호출하는 모듈
**의존성 관계:**
- 검색, 추천 백엔드 모듈 (검색 API)
- 데이터베이스 모듈 (검색 히스토리)
- 사용자 관리 모듈 (개인화 데이터)

---

## 🖥️ 백엔드 모듈 (6개)

### 1. 사용자 관리 백엔드 모듈

#### 3.1 모듈 이름
**UserManagementBackendModule**

#### 3.2 모듈 형
**기능 모듈**

#### 3.3 인터페이스
**입력:**
- 인증 요청 (로그인 정보)
- 프로필 업데이트 요청
- 권한 검증 요청

**출력:**
- 인증 토큰 및 사용자 정보
- 프로필 업데이트 결과
- 권한 검증 결과

**처리:**
- Google OAuth 인증 처리
- 사용자 프로필 데이터 검증 및 저장
- JWT 토큰 생성 및 관리

#### 3.4 오류 메시지
**예외 처리:**
- 인증 실패 시 적절한 HTTP 상태 코드 반환
- 데이터 검증 실패 시 상세 오류 메시지 제공
- 권한 부족 시 403 Forbidden 응답
- 서버 오류 시 일반적인 오류 메시지 반환

#### 3.5 사용하는 파일
**구성 요소:**
- 인증 라우터
- 사용자 관리 라우터
- 인증 미들웨어
- 사용자 데이터 검증 로직

#### 3.6 호출하는 모듈
**의존성 관계:**
- 데이터베이스 모듈 (사용자 정보 저장/조회)
- Google OAuth 서비스 (외부 인증)
- 파일 저장소 모듈 (프로필 이미지)

---

### 2. 레시피 관리 백엔드 모듈

#### 3.1 모듈 이름
**RecipeManagementBackendModule**

#### 3.2 모듈 형
**기능 모듈**

#### 3.3 인터페이스
**입력:**
- 레시피 CRUD 요청
- 사용자별 레시피 관리 요청
- 통계 업데이트 요청

**출력:**
- 레시피 데이터 (목록/상세)
- 사용자별 레시피 관계 정보
- 레시피 통계 데이터

**처리:**
- 레시피 데이터 검증 및 저장
- 사용자별 관계 데이터 관리
- 통계 데이터 실시간 업데이트

#### 3.4 오류 메시지
**예외 처리:**
- 레시피 없음 시 404 Not Found
- 권한 부족 시 403 Forbidden
- 데이터 검증 실패 시 400 Bad Request
- 서버 오류 시 500 Internal Server Error

#### 3.5 사용하는 파일
**구성 요소:**
- 레시피 라우터
- 사용자 레시피 라우터
- 레시피 비즈니스 로직
- 통계 계산 로직

#### 3.6 호출하는 모듈
**의존성 관계:**
- 데이터베이스 모듈 (레시피 데이터 관리)
- AI 영상 분석 모듈 (AI 생성 레시피)
- 파일 저장소 모듈 (레시피 이미지)

---

### 3. 냉장고 관리 백엔드 모듈

#### 3.1 모듈 이름
**RefrigeratorManagementBackendModule**

#### 3.2 모듈 형
**기능 모듈**

#### 3.3 인터페이스
**입력:**
- 재료 CRUD 요청
- OCR 처리 요청
- 유통기한 알림 요청

**출력:**
- 재료 데이터 (목록/상세)
- OCR 처리 결과
- 유통기한 알림 데이터

**처리:**
- 재료 데이터 검증 및 저장
- 영수증 이미지 OCR 처리
- 유통기한 기반 알림 생성

#### 3.4 오류 메시지
**예외 처리:**
- OCR 처리 실패 시 수동 입력 안내
- 이미지 형식 오류 시 지원 형식 안내
- 재료 데이터 검증 실패 시 상세 오류 메시지
- 서버 오류 시 일반적인 오류 메시지

#### 3.5 사용하는 파일
**구성 요소:**
- 재료 관리 라우터
- OCR 처리 서비스
- 재료 데이터 검증 로직
- 유통기한 관리 로직

#### 3.6 호출하는 모듈
**의존성 관계:**
- 데이터베이스 모듈 (재료 정보 저장)
- AI 영상 분석 모듈 (OCR 처리)
- 파일 저장소 모듈 (영수증 이미지)

---

### 4. 커뮤니티 관리 백엔드 모듈

#### 3.1 모듈 이름
**CommunityManagementBackendModule**

#### 3.2 모듈 형
**기능 모듈**

#### 3.3 인터페이스
**입력:**
- 게시글 CRUD 요청
- 댓글 및 좋아요 요청
- 실시간 구독 요청

**출력:**
- 게시글 데이터 (목록/상세)
- 댓글 및 좋아요 정보
- 실시간 업데이트 이벤트

**처리:**
- 게시글 데이터 검증 및 저장
- 댓글 및 좋아요 처리
- 실시간 이벤트 발행

#### 3.4 오류 메시지
**예외 처리:**
- 게시글 없음 시 404 Not Found
- 권한 부족 시 403 Forbidden
- 콘텐츠 검토 실패 시 적절한 안내
- 실시간 연결 오류 시 재연결 안내

#### 3.5 사용하는 파일
**구성 요소:**
- 게시글 라우터
- 댓글 라우터
- 좋아요 라우터
- 실시간 이벤트 처리

#### 3.6 호출하는 모듈
**의존성 관계:**
- 데이터베이스 모듈 (게시글 데이터 관리)
- 파일 저장소 모듈 (게시글 이미지)
- 사용자 관리 모듈 (작성자 정보)

---

### 5. AI 영상 분석 백엔드 모듈

#### 3.1 모듈 이름
**AIVideoAnalysisBackendModule**

#### 3.2 모듈 형
**기능 모듈**

#### 3.3 인터페이스
**입력:**
- YouTube URL 분석 요청
- 분석 상태 조회 요청
- 분석 결과 조회 요청

**출력:**
- 분석 작업 ID
- 분석 진행 상태
- 구조화된 레시피 데이터

**처리:**
- YouTube 영상 메타데이터 추출
- AI 파이프라인 오케스트레이션
- 레시피 데이터 구조화 및 저장

#### 3.4 오류 메시지
**예외 처리:**
- 잘못된 URL 형식 시 400 Bad Request
- 영상 접근 불가 시 404 Not Found
- AI 서비스 오류 시 503 Service Unavailable
- 처리 시간 초과 시 408 Request Timeout

#### 3.5 사용하는 파일
**구성 요소:**
- AI 파이프라인 라우터
- YouTube 처리 서비스
- AI 서비스 통합 로직
- 분석 결과 관리 로직

#### 3.6 호출하는 모듈
**의존성 관계:**
- 외부 AI 서비스 (Gemini, Tesseract, Whisper)
- 데이터베이스 모듈 (분석 결과 저장)
- 파일 저장소 모듈 (프레임 이미지)
- 레시피 관리 모듈 (생성된 레시피 저장)

---

### 6. 검색, 추천 백엔드 모듈

#### 3.1 모듈 이름
**SearchRecommendationBackendModule**

#### 3.2 모듈 형
**기능 모듈**

#### 3.3 인터페이스
**입력:**
- 검색 쿼리 및 필터 조건
- 사용자 선호도 데이터
- 추천 요청

**출력:**
- 검색 결과 데이터
- 개인화 추천 데이터
- 검색 히스토리

**처리:**
- 검색 쿼리 최적화 및 실행
- 개인화 추천 알고리즘 실행
- 검색 히스토리 관리

#### 3.4 오류 메시지
**예외 처리:**
- 검색 결과 없음 시 빈 결과 반환
- 잘못된 검색 조건 시 기본값 적용
- 추천 실패 시 인기 레시피 반환
- 서버 오류 시 캐시된 결과 반환

#### 3.5 사용하는 파일
**구성 요소:**
- 검색 라우터
- 추천 라우터
- 검색 알고리즘
- 추천 엔진

#### 3.6 호출하는 모듈
**의존성 관계:**
- 데이터베이스 모듈 (검색 데이터 조회)
- 레시피 관리 모듈 (레시피 데이터)
- 커뮤니티 관리 모듈 (게시글 데이터)
- 사용자 관리 모듈 (개인화 데이터)

---

## 📊 모듈 간 관계도

```
┌─────────────────────────────────────────────────────────────┐
│                    Cookit 시스템                            │
├─────────────────────────────────────────────────────────────┤
│  📱 프론트엔드 (6개 UI 모듈)                              │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  사용자관리 UI ↔ 사용자관리 기능                        │ │
│  │  레시피 UI ↔ 레시피 기능                                │ │
│  │  냉장고 UI ↔ 냉장고 기능                                │ │
│  │  커뮤니티 UI ↔ 커뮤니티 기능                            │ │
│  │  AI 분석 UI ↔ AI 분석 기능                              │ │
│  │  검색추천 UI ↔ 검색추천 기능                            │ │
│  └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│  🖥️ 백엔드 (6개 기능 모듈)                                │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │  모든 기능 모듈 ↔ 데이터베이스 모듈                     │ │
│  │  AI 분석 기능 ↔ 외부 AI 서비스                          │ │
│  │  냉장고 기능 ↔ OCR 서비스                               │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 🎯 요약

- **총 모듈 수**: 12개 (UI 모듈 6개 + 기능 모듈 6개)
- **기능별 분류**: 6개 기능 × 2개 타입 (UI/기능)
- **모듈 간 통신**: REST API + 실시간 구독
- **외부 의존성**: Google OAuth, AI 서비스, 데이터베이스
